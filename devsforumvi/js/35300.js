function selectCode(a){a=$(a).parent().next().next()[0];if(window.getSelection){var b=window.getSelection();if(b.setBaseAndExtent)b.setBaseAndExtent(a,0,a,a.innerText.length-1);else{window.opera&&"<BR>"==a.innerHTML.substring(a.innerHTML.length-4)&&(a.innerHTML+=" ");var c=document.createRange();c.selectNodeContents(a);b.removeAllRanges();b.addRange(c)}}else document.getSelection?(b=document.getSelection(),c=document.createRange(),c.selectNodeContents(a),b.removeAllRanges(),b.addRange(c)):document.selection&&(c=document.body.createTextRange(),c.moveToElementText(a),c.select())}function selectTheme(input){var theme=input.options[input.selectedIndex].innerHTML;$("pre").attr("class","CodeMirror cm-s-"+theme.replace(/\s/g," cm-s-"));$(".chgStyle").attr("title",theme);$("option:contains('"+theme+"')",".chgStyle").prop("selected",true);my_setcookie("codeStyle",theme,true)}$(function(){$("code").each(function(){$("br",this).replaceWith("\n");var _this=$(this),txt=_this.text();var lg=(/^[\s\n]*({[A-Z_]+})?[\s\n]*<[\s\S]+>[\s\n]*({[A-Z_]+})?[\s\n]*$/.test(txt)?"html":/^\{[\S\s]+\}$|^\w+\(.*\)(;|,)?$|\B\/\/\B|\$\.\w+|\$\(.*\)|\bif\s?\(.+\)\{?[\s\S]+\}?|\bif\s?\(.+\)\{?[\s\S]+\}?\s?else\s?\{?|;?\s?while\s?\(|\bfor\s?\(.+\)|\bfunction:\s?\w+|function\s\w+\(.*?\)\s?\{|\w+\sfunction\s\(|\(function\s?\(.*?\)\s?\{|\bvar\s\w+\s?=\s?('|")?[\w\d]+('|")?(;|,)?|\}\);?|\}\n*(,|;)|('|")?\w+('|")?\s?:\s?('|")[\w\d]+('|")(,|\})|\b(true|false)\b|(^|[^\/])\/(?!\/)[^\*].+[^\*]\/[gimy]{0,4}(?=\s*($|[\r\n,.})]))|\((window|document)\)/g.test(txt.replace(/\/\*.*\*\//g, "")) && !/DXImageTransform\.Microsoft/g.test(txt)?"js":"css");if(lg=="html"){lang="text/html"}else if(lg=="js"){lang={name:"javascript",json:true}}else{lang="text/css"}_this.attr("data-lang",lg).wrap("<pre />");editor=CodeMirror.runMode(txt,lang,_this[0]);var numbers=$('<div class="lineNumber"></div>').insertBefore(_this);for(var i=0;i<txt.split("\n").length;i++){numbers.append("<span></span>")}});$("pre").prepend('<div class="controlCode"><select title="default" dir="rtl" onchange="selectTheme(this)" class="chgStyle"><option selected="selected">default</option><option>3024-day</option><option>3024-night</option><option>ambiance</option><option>base16-dark</option><option>base16-light</option><option>blackboard</option><option>cobalt</option><option>eclipse</option><option>elegant</option><option>erlang-dark</option><option>lesser-dark</option><option>mbo</option><option>mdn-like</option><option>midnight</option><option>monokai</option><option>neat</option><option>neo</option><option>night</option><option>paraiso-dark</option><option>paraiso-light</option><option>pastel-on-dark</option><option>rubyblue</option><option>solarized dark</option><option>solarized light</option><option>the-matrix</option><option>tomorrow-night-eighties</option><option>twilight</option><option>vibrant-ink</option><option>xq-dark</option><option>xq-light</option></select><img class="selectCode" title="Click để chọn toàn bộ code" onclick="selectCode(this)" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><img class="textCode" title="Ẩn số dòng" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><input class="findLine" title="Nhập số dòng muốn chuyển đến" size="4" maxlength="4" type="text" /></div>');var choice=my_getcookie("codeStyle");if(choice){$("pre").attr("class","CodeMirror cm-s-"+choice.replace(/\s/g," cm-s-"));$("option:contains('"+choice+"')",".chgStyle").prop("selected",true);$(".chgStyle").attr("title",choice)}$(".findLine").on("input",function(){this.value=/\d+/g.exec(this.value)}).keydown(function(a){var b=$(this),h=$("#header").height();13==a.keyCode?(a=b.parent().next().find("span:eq("+(parseInt(this.value,10)-1)+")"),a.length&&$("body, html").animate({scrollTop:a.offset().top-h}),this.value=""):$("body, html").animate({scrollTop:b.offset().top-h})}).focus(function(){$(this).parent().css("opacity",1)}).blur(function(){this.value="";$(this).parent().removeAttr("style")});$(".textCode").click(function(){var a=$(this),b=a.parent().next(),c=b.next();a.toggleClass("pretty");a.hasClass("pretty")?(b.animate({"margin-left":"-4em"}),c.animate({"margin-left":0}),a.attr("title","Hiện số dòng")):(b.animate({"margin-left":"-1em"}),c.animate({"margin-left":"3em"}),a.attr("title","Ẩn số dòng"))})});